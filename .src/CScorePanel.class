' Gambas class file

Property Read Panel As Panel

Private $hPanel As Panel
Private $hGridView As GridView
Private $hButton As Button
Private $hGameDef As CGameDef

Public Sub _new(hContainer As Container)

  $hPanel = New Panel(hContainer) As "Panel"

  With $hPanel
    .Arrangement = Arrange.Horizontal
    .Background = &HFFFFDF
    .Expand = True
  End With

  $hGameDef = MGameLoader.GameDefs["default"]
  $hGameDef.Debug
  $hGridView = New GridView($hPanel) As "GridView"
  With $hGridView
    .Columns.Count = MSettings.Players + 1
    .Rows.Count = $hGameDef.Rows.Count
    .Columns.Width = 52
    .W = 400
    .H = 200
    .Border = Border.None
    .Background = &HFFFFDF
  End With

End

Private Function Panel_Read() As Panel

  Return $hPanel

End

Public Sub GridView_Data(Row As Integer, Column As Integer)

  Dim hGameRow As CGameRow
  Dim hData As _GridView_Data

  hGameRow = $hGameDef.Rows[Row]
  hData = $hGridView.Data

  If Column = 0 Then
    hData.Text = hGameRow.Text
    hData.Background = Color.Orange
  Endif

  If hGameRow.IsSum Or hGameRow.IsCounter Then
    hData.Background = Color.Yellow
    hData.Padding = 2
    hData.Font = Font["Bold"]
  Endif

End
